{"ast":null,"code":"import _asyncToGenerator from \"/Users/mirkosiddi/Documents/development/duties-list/angular-duties-list/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { FormControl, FormGroup, Validators } from \"@angular/forms\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/duty.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\n\nfunction DutyDetailsComponent_div_0_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h4\");\n    i0.ɵɵtext(2, \"Duty\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\")(4, \"label\")(5, \"strong\");\n    i0.ɵɵtext(6, \"Id:\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\")(9, \"label\")(10, \"strong\");\n    i0.ɵɵtext(11, \"Name:\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"a\", 2);\n    i0.ɵɵtext(14, \" Edit \");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.currentDuty.Id, \" \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.currentDuty.Name, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/duties/\", ctx_r2.currentDuty.Id, \"\");\n  }\n}\n\nfunction DutyDetailsComponent_div_0_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"br\");\n    i0.ɵɵelementStart(2, \"p\");\n    i0.ɵɵtext(3, \"Please click on a Duty...\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction DutyDetailsComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, DutyDetailsComponent_div_0_div_1_Template, 15, 3, \"div\", 0);\n    i0.ɵɵtemplate(2, DutyDetailsComponent_div_0_div_2_Template, 4, 0, \"div\", 0);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.currentDuty == null ? null : ctx_r0.currentDuty.Id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.currentDuty);\n  }\n}\n\nfunction DutyDetailsComponent_div_1_div_1_div_7_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Id is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DutyDetailsComponent_div_1_div_1_div_7_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Id must be at least 2 characters long. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DutyDetailsComponent_div_1_div_1_div_7_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Id must be not more than 4 characters long. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DutyDetailsComponent_div_1_div_1_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵtemplate(1, DutyDetailsComponent_div_1_div_1_div_7_div_1_Template, 2, 0, \"div\", 0);\n    i0.ɵɵtemplate(2, DutyDetailsComponent_div_1_div_1_div_7_div_2_Template, 2, 0, \"div\", 0);\n    i0.ɵɵtemplate(3, DutyDetailsComponent_div_1_div_1_div_7_div_3_Template, 2, 0, \"div\", 0);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(3);\n    let tmp_0_0;\n    let tmp_1_0;\n    let tmp_2_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_0_0 = ctx_r6.updateDutyForm.get(\"Id\")) == null ? null : tmp_0_0.errors == null ? null : tmp_0_0.errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_1_0 = ctx_r6.updateDutyForm.get(\"Id\")) == null ? null : tmp_1_0.errors == null ? null : tmp_1_0.errors[\"minlength\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_2_0 = ctx_r6.updateDutyForm.get(\"Id\")) == null ? null : tmp_2_0.errors == null ? null : tmp_2_0.errors[\"maxlength\"]);\n  }\n}\n\nfunction DutyDetailsComponent_div_1_div_1_div_12_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Name is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DutyDetailsComponent_div_1_div_1_div_12_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Id must be at least 8 characters long. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DutyDetailsComponent_div_1_div_1_div_12_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Name must be not more than 50 characters long. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DutyDetailsComponent_div_1_div_1_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵtemplate(1, DutyDetailsComponent_div_1_div_1_div_12_div_1_Template, 2, 0, \"div\", 0);\n    i0.ɵɵtemplate(2, DutyDetailsComponent_div_1_div_1_div_12_div_2_Template, 2, 0, \"div\", 0);\n    i0.ɵɵtemplate(3, DutyDetailsComponent_div_1_div_1_div_12_div_3_Template, 2, 0, \"div\", 0);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(3);\n    let tmp_0_0;\n    let tmp_1_0;\n    let tmp_2_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_0_0 = ctx_r7.updateDutyForm.get(\"Name\")) == null ? null : tmp_0_0.errors == null ? null : tmp_0_0.errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_1_0 = ctx_r7.updateDutyForm.get(\"Name\")) == null ? null : tmp_1_0.errors == null ? null : tmp_1_0.errors[\"minlength\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_2_0 = ctx_r7.updateDutyForm.get(\"Name\")) == null ? null : tmp_2_0.errors == null ? null : tmp_2_0.errors[\"maxlength\"]);\n  }\n}\n\nfunction DutyDetailsComponent_div_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"h4\");\n    i0.ɵɵtext(2, \"Duty\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 6)(4, \"label\", 7);\n    i0.ɵɵtext(5, \"Id\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(6, \"input\", 8);\n    i0.ɵɵtemplate(7, DutyDetailsComponent_div_1_div_1_div_7_Template, 4, 3, \"div\", 9);\n    i0.ɵɵelementStart(8, \"div\", 6)(9, \"label\", 10);\n    i0.ɵɵtext(10, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(11, \"input\", 11);\n    i0.ɵɵtemplate(12, DutyDetailsComponent_div_1_div_1_div_12_Template, 4, 3, \"div\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function DutyDetailsComponent_div_1_div_1_Template_button_click_13_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r14.deleteDuty());\n    });\n    i0.ɵɵtext(14, \" Delete \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function DutyDetailsComponent_div_1_div_1_Template_button_click_15_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r16 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r16.updateDuty());\n    });\n    i0.ɵɵtext(16, \" Update \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"p\");\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    let tmp_0_0;\n    let tmp_1_0;\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_0_0 = ctx_r4.updateDutyForm.get(\"Id\")) == null ? null : tmp_0_0.invalid) && (((tmp_0_0 = ctx_r4.updateDutyForm.get(\"Id\")) == null ? null : tmp_0_0.dirty) || ((tmp_0_0 = ctx_r4.updateDutyForm.get(\"Id\")) == null ? null : tmp_0_0.touched)));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_1_0 = ctx_r4.updateDutyForm.get(\"Name\")) == null ? null : tmp_1_0.invalid) && (((tmp_1_0 = ctx_r4.updateDutyForm.get(\"Name\")) == null ? null : tmp_1_0.dirty) || ((tmp_1_0 = ctx_r4.updateDutyForm.get(\"Name\")) == null ? null : tmp_1_0.touched)));\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r4.message);\n  }\n}\n\nfunction DutyDetailsComponent_div_1_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"br\");\n    i0.ɵɵelementStart(2, \"p\");\n    i0.ɵɵtext(3, \"Cannot access this Duty...\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction DutyDetailsComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵtemplate(1, DutyDetailsComponent_div_1_div_1_Template, 19, 3, \"div\", 4);\n    i0.ɵɵtemplate(2, DutyDetailsComponent_div_1_div_2_Template, 4, 0, \"div\", 0);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.updateDutyForm);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.currentDuty.Id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.currentDuty.Id);\n  }\n}\n\nexport class DutyDetailsComponent {\n  constructor(dutyService, route, router) {\n    this.dutyService = dutyService;\n    this.route = route;\n    this.router = router;\n    this.viewMode = false;\n    this.currentDuty = {\n      Id: \"\",\n      Name: \"\"\n    };\n    this.updateDutyForm = new FormGroup({});\n    this.message = \"\";\n  }\n\n  ngOnInit() {\n    this.message = \"\";\n    console.log(\"this.currentDuty\", this.currentDuty);\n    this.getDuty(this.route.snapshot.params[\"id\"]).then(result => {\n      console.log(\"Duty loaded\");\n    }).catch(err => {\n      console.log(err);\n    });\n    console.log(\"this.currentDuty\", this.currentDuty);\n  }\n\n  getDuty(id) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.dutyService.get(id).subscribe({\n        next: data => {\n          _this.currentDuty = data;\n          console.log(\"data\", data);\n        },\n        complete: () => {\n          _this.createForm();\n        },\n        error: e => console.error(e)\n      });\n    })();\n  }\n\n  createForm() {\n    this.updateDutyForm = new FormGroup({\n      Id: new FormControl(this.currentDuty.Id, [Validators.required, Validators.minLength(2), Validators.maxLength(4)]),\n      Name: new FormControl(this.currentDuty.Name, [Validators.required, Validators.minLength(8), Validators.maxLength(50)])\n    });\n    console.log(\"this.updateDutyForm\", this.updateDutyForm);\n  }\n\n  updateDuty() {\n    this.message = \"\";\n    this.dutyService.update(this.currentDuty.Id, this.updateDutyForm.value).subscribe({\n      next: res => {\n        console.log(res);\n        this.message = res.message ? res.message : \"This Duty was updated successfully!\";\n      },\n      error: e => console.error(e)\n    });\n  }\n\n  deleteDuty() {\n    confirm(\"Are you sure you want to delete this item?\") && this.dutyService.delete(this.currentDuty.Id).subscribe({\n      next: res => {\n        console.log(res);\n        this.router.navigate([\"/duties\"]);\n      },\n      error: e => console.error(e)\n    });\n  }\n\n}\n\nDutyDetailsComponent.ɵfac = function DutyDetailsComponent_Factory(t) {\n  return new (t || DutyDetailsComponent)(i0.ɵɵdirectiveInject(i1.DutyService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router));\n};\n\nDutyDetailsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DutyDetailsComponent,\n  selectors: [[\"app-duty-details\"]],\n  inputs: {\n    viewMode: \"viewMode\",\n    currentDuty: \"currentDuty\"\n  },\n  decls: 2,\n  vars: 2,\n  consts: [[4, \"ngIf\"], [3, \"formGroup\", 4, \"ngIf\"], [1, \"badge\", \"badge-warning\", 3, \"routerLink\"], [3, \"formGroup\"], [\"class\", \"edit-form\", 4, \"ngIf\"], [1, \"edit-form\"], [1, \"form-group\"], [\"for\", \"Id\"], [\"type\", \"text\", \"id\", \"id\", \"required\", \"\", \"name\", \"id\", \"formControlName\", \"Id\", 1, \"form-control\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [\"for\", \"Name\"], [\"id\", \"name\", \"required\", \"\", \"name\", \"name\", \"formControlName\", \"Name\", 1, \"form-control\"], [1, \"badge\", \"badge-danger\", \"mr-2\", 3, \"click\"], [\"type\", \"submit\", 1, \"badge\", \"badge-success\", \"mb-2\", 3, \"click\"], [1, \"alert\", \"alert-danger\"]],\n  template: function DutyDetailsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, DutyDetailsComponent_div_0_Template, 3, 2, \"div\", 0);\n      i0.ɵɵtemplate(1, DutyDetailsComponent_div_1_Template, 3, 3, \"div\", 1);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.viewMode && (ctx.currentDuty == null ? null : ctx.currentDuty.Id));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.viewMode);\n    }\n  },\n  dependencies: [i3.NgIf, i2.RouterLinkWithHref, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.FormGroupDirective, i4.FormControlName],\n  styles: [\".edit-form[_ngcontent-%COMP%] {\\n  max-width: 400px;\\n  margin: auto;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImR1dHktZGV0YWlscy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsZ0JBQWdCO0VBQ2hCLFlBQVk7QUFDZCIsImZpbGUiOiJkdXR5LWRldGFpbHMuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5lZGl0LWZvcm0ge1xuICBtYXgtd2lkdGg6IDQwMHB4O1xuICBtYXJnaW46IGF1dG87XG59XG4iXX0= */\"]\n});","map":{"version":3,"mappings":"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","names":["FormControl","FormGroup","Validators","i0","DutyDetailsComponent","constructor","dutyService","route","router","Id","Name","ngOnInit","message","console","log","currentDuty","getDuty","snapshot","params","then","result","catch","err","id","get","subscribe","next","data","complete","createForm","error","e","updateDutyForm","required","minLength","maxLength","updateDuty","update","value","res","deleteDuty","confirm","delete","navigate","selectors","inputs","viewMode","decls","vars","consts","template"],"sourceRoot":"","sources":["/Users/mirkosiddi/Documents/development/duties-list/angular-duties-list/src/app/components/duty-details/duty-details.component.ts","/Users/mirkosiddi/Documents/development/duties-list/angular-duties-list/src/app/components/duty-details/duty-details.component.html"],"sourcesContent":["import { Component, createPlatform, Input, OnInit } from \"@angular/core\";\nimport { FormControl, FormGroup, Validators } from \"@angular/forms\";\nimport { DutyService } from \"src/app/services/duty.service\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { Duty } from \"src/app/models/duty.model\";\n@Component({\n  selector: \"app-duty-details\",\n  templateUrl: \"./duty-details.component.html\",\n  styleUrls: [\"./duty-details.component.css\"],\n})\nexport class DutyDetailsComponent implements OnInit {\n  @Input() viewMode = false;\n  @Input() currentDuty: Duty = {\n    Id: \"\",\n    Name: \"\",\n  };\n  updateDutyForm: FormGroup = new FormGroup({});\n  message = \"\";\n\n  constructor(\n    private dutyService: DutyService,\n    private route: ActivatedRoute,\n    private router: Router\n  ) {}\n\n  ngOnInit(): void {\n    this.message = \"\";\n    console.log(\"this.currentDuty\", this.currentDuty);\n    this.getDuty(this.route.snapshot.params[\"id\"])\n      .then((result) => {\n        console.log(\"Duty loaded\");\n      })\n      .catch((err: Error) => {\n        console.log(err);\n      });\n    console.log(\"this.currentDuty\", this.currentDuty);\n  }\n\n  async getDuty(id: String): Promise<void> {\n    this.dutyService.get(id).subscribe({\n      next: (data) => {\n        this.currentDuty = data;\n        console.log(\"data\", data);\n      },\n      complete: () => {\n        this.createForm();\n      },\n      error: (e) => console.error(e),\n    });\n  }\n\n  createForm(): void {\n    this.updateDutyForm = new FormGroup({\n      Id: new FormControl(this.currentDuty.Id, [\n        Validators.required,\n        Validators.minLength(2),\n        Validators.maxLength(4),\n      ]),\n      Name: new FormControl(this.currentDuty.Name, [\n        Validators.required,\n        Validators.minLength(8),\n        Validators.maxLength(50),\n      ]),\n    });\n    console.log(\"this.updateDutyForm\", this.updateDutyForm);\n  }\n\n  updateDuty(): void {\n    this.message = \"\";\n    this.dutyService\n      .update(this.currentDuty.Id, this.updateDutyForm.value)\n      .subscribe({\n        next: (res) => {\n          console.log(res);\n          this.message = res.message\n            ? res.message\n            : \"This Duty was updated successfully!\";\n        },\n        error: (e) => console.error(e),\n      });\n  }\n\n  deleteDuty(): void {\n    confirm(\"Are you sure you want to delete this item?\") &&\n      this.dutyService.delete(this.currentDuty.Id).subscribe({\n        next: (res) => {\n          console.log(res);\n          this.router.navigate([\"/duties\"]);\n        },\n        error: (e) => console.error(e),\n      });\n  }\n}\n","<div *ngIf=\"viewMode && currentDuty?.Id\">\n  <div *ngIf=\"currentDuty?.Id\">\n    <h4>Duty</h4>\n    <div>\n      <label><strong>Id:</strong></label> {{ currentDuty.Id }}\n    </div>\n    <div>\n      <label><strong>Name:</strong></label>\n      {{ currentDuty.Name }}\n    </div>\n\n    <a class=\"badge badge-warning\" routerLink=\"/duties/{{ currentDuty.Id }}\">\n      Edit\n    </a>\n  </div>\n  <div *ngIf=\"!currentDuty\">\n    <br />\n    <p>Please click on a Duty...</p>\n  </div>\n</div>\n<div *ngIf=\"!viewMode\" [formGroup]=\"updateDutyForm\">\n  <div *ngIf=\"currentDuty.Id\" class=\"edit-form\">\n    <h4>Duty</h4>\n    <div class=\"form-group\">\n      <label for=\"Id\">Id</label>\n      <input\n        type=\"text\"\n        class=\"form-control\"\n        id=\"id\"\n        required\n        name=\"id\"\n        formControlName=\"Id\"\n      />\n      <div\n        *ngIf=\"\n          updateDutyForm.get('Id')?.invalid &&\n          (updateDutyForm.get('Id')?.dirty || updateDutyForm.get('Id')?.touched)\n        \"\n        class=\"alert alert-danger\"\n      >\n        <div *ngIf=\"updateDutyForm.get('Id')?.errors?.['required']\">\n          Id is required.\n        </div>\n        <div *ngIf=\"updateDutyForm.get('Id')?.errors?.['minlength']\">\n          Id must be at least 2 characters long.\n        </div>\n        <div *ngIf=\"updateDutyForm.get('Id')?.errors?.['maxlength']\">\n          Id must be not more than 4 characters long.\n        </div>\n      </div>\n      <div class=\"form-group\">\n        <label for=\"Name\">Name</label>\n        <input\n          class=\"form-control\"\n          id=\"name\"\n          required\n          name=\"name\"\n          formControlName=\"Name\"\n        />\n        <div\n          *ngIf=\"\n            updateDutyForm.get('Name')?.invalid &&\n            (updateDutyForm.get('Name')?.dirty ||\n              updateDutyForm.get('Name')?.touched)\n          \"\n          class=\"alert alert-danger\"\n        >\n          <div *ngIf=\"updateDutyForm.get('Name')?.errors?.['required']\">\n            Name is required.\n          </div>\n          <div *ngIf=\"updateDutyForm.get('Name')?.errors?.['minlength']\">\n            Id must be at least 8 characters long.\n          </div>\n          <div *ngIf=\"updateDutyForm.get('Name')?.errors?.['maxlength']\">\n            Name must be not more than 50 characters long.\n          </div>\n        </div>\n      </div>\n      <button class=\"badge badge-danger mr-2\" (click)=\"deleteDuty()\">\n        Delete\n      </button>\n      <button\n        type=\"submit\"\n        class=\"badge badge-success mb-2\"\n        (click)=\"updateDuty()\"\n      >\n        Update\n      </button>\n      <p>{{ message }}</p>\n    </div>\n  </div>\n  <div *ngIf=\"!currentDuty.Id\">\n    <br />\n    <p>Cannot access this Duty...</p>\n  </div>\n</div>\n"]},"metadata":{},"sourceType":"module"}